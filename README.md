# Linux_FreeBSD_networking_perf

## Команды

### stats \<protocol\>
Выводит различную статистику указанного протокола

Поддерживаемые протоколы:

Linux: ip, tcp, udp, udplite, icmp, mptcp

FreeBSD: ip, tcp, udp, icmp, igmp

### iperf3 \<filename\>
Анализирует файл, полученный от iperf3 с флагом -J. Выводит временной интервал и число бит, переданных за это время

### list sockets \<protocol\> 
Показывает список активных сокетов, работающих по заданному протоколу

Поддерживаемые протоколы:

Linux: tcp, tcp6, udp, udp6, udplite, udplite6, raw, raw6, icmp, icmp6

FreeBSD: tcp, udp, raw

### measure 
#### rx-timings 
Измеряет время нахождения пакета в системе во время приема, получает пакеты от measure tx-timings

Выводит следующую информацию:

* Hardware - время от получения данных устройством до прибытия в приложение (требует поддержки от устройства и не доступно во FreeBSD)
* Software - время от получения данных ядром до прибытия в приложение (во FreeBSD доступно только для UDP)
* Total - время от отправки данных с помощью measure tx-timings до получения приложением

#### tx-timings 
Отправляет пакеты measure rx-timings. 
Для Linux так же доступно измерение времени нахождения пакета в системе, выводится следующая информация:

* Hardware: время от отправки данных приложением до получения их устройством (требует поддержки от устройства)
* Software: время от отправки данных приложением до момента, когда информация покинет ядро (при measure-type = software) 
или до момента попадания пакета в планировщик (при measure-type = scheduler)
  
#### Аргументы

* protocol - используемый протокол. ***tcp***, udp, sctp, raw
* port - используемый порт для отправки/прослушки
* packets-count - число отправляемых/принимаемых пакетов. Время расчитывается как среднее арифметическое.
* address - ip-адрес, на который отправлять данные
* measure-type - вид измерения, описаны в tx-timings. ***software***, scheduler
* ns - если установлен, информацию выводится в наносекундах (по умолчанию - микросекунды). Не имеет смысла во FreeBSD, 
так как software timestamp возвращается с точностью до микросекунды.